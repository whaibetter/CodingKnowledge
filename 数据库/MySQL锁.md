## MySQL有哪些锁？锁算法？

- 表级锁：开销小，加锁快；**不会出现死锁**；锁定粒度大，发生锁冲突的概率最高,并发度最低。MyISAM
- 行级锁：开销大，加锁慢；会出现死锁；锁定粒度最小，发生锁冲突的概率最低,并发度也最高。
- 页面锁：开销和加锁时间界于表锁和行锁之间；会出现死锁；锁定粒度界于表锁和行锁之间，并发度一般。BerkeleyDB

**锁算法：**

InnoDB ： 共享锁、排它锁（各种修改操作）

- 记录锁（行锁）
- 间隙锁 **RR(可重复读)** ，解决幻读，不允许插入；**间隙锁是innodb中行锁的一种**。
- 临键锁（Next-Key Locks）记录锁+间隙锁

## MySQL死锁如何解决？

表级锁不会产生死锁.所以解决死锁主要还是针对于最常用的InnoDB。

- 设置锁超时时间

- **调整隔离级别**

  根据实际需求选择合适的隔离级别。例如，在可以接受幻读的情况下，使用**读已提交（READ COMMITTED）**隔离级别可以降低死锁的风险。但需要注意的是，降低隔离级别可能会引入其他并发问题。

- 重试失败的事务

- 监控和分析死锁：MySQL提供了一些工具和命令（如`SHOW ENGINE INNODB STATUS`）来监控和分析死锁情况

